<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Creating Pages - Frontless</title>

<meta name="description" content="Documentation built with SkyDocs."/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="generator" content="SkyDocs v0.7.4 Beta"/>

<meta property="og:type" content="website"/>
<meta property="og:title" content="Creating Pages - Frontless"/>
<meta property="og:site_name" content="Frontless"/>
<meta property="og:url" content="https://skydocs.skyost.eu/en/pages/creating_pages.html"/>
<meta property="og:description" content="Documentation built with SkyDocs."/>
<meta property="og:image" content="https://skydocs.skyost.eu/assets/img/icon.png"/>

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Creating Pages - Frontless"/>
<meta name="twitter:site" content="Frontless"/>
<meta name="twitter:creator" content="@Skyost_"/>
<meta name="twitter:url" content="https://skydocs.skyost.eu/en/pages/creating_pages.html"/>
<meta name="twitter:description" content="Documentation built with SkyDocs."/>
<meta name="twitter:image" content="https://skydocs.skyost.eu/assets/img/icon.png"/>

<meta name="theme-color" content="#2980b9"/>
<link rel="icon" type="image/png" href="../../assets/img/icon.png"/>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.min.css"/>
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Lato"/>
<link rel="stylesheet" type="text/css" href="../../assets/css/page.css"/>
</head>
<body>
<div id="content" class="row">
<div id="navbar" class="col-md-4 col-lg-2">
<header class="col-md-4 col-lg-2">
<h1>
<a href="/">
<img src="/assets/img/logo.svg">
</a></h1>
<form action="../../search.html" method="get">
<input name="keywords" type="text" class="form-control" placeholder="Search...">
</form>
</header>
<div id="mobile-bar" class="d-md-none clearfix">
<i class="fa fa-bars" aria-hidden="true"></i>
</div>
<div id="navigation" class="d-none d-md-block">
<nav class="col-md-4 col-lg-2" style="max-height: calc(100vh - 200px);">
<ul>
<li>
<a href="/en/index.html"><i class="fa fa-home" aria-hidden="true"></i> About</a>
</li>
<li>
<a href="/en/start.html"><i class="fa fa-rocket" aria-hidden="true"></i> Getting Started</a>
</li>
<li>
<a href="/en/applayout.html"><i class="fa fa-folder" aria-hidden="true"></i> App Structure</a>
</li>
<li>
<a href="/en/pages/creating_pages.html"><i class="fa fa-file-text" aria-hidden="true"></i> Pages</a>
<ul>
<li>
<a href="/en/pages/creating_pages.html">- Creating Pages</a>
</li>
<li>
<a href="/en/pages/components.html">- Riot.JS Components</a>
</li>
<li>
<a href="/en/pages/creating_pages.html#page-lifecycle">- Page Lifecycle</a>
</li>
<li>
<a href="/en/pages/dependencies.html">- Managing Dependencies</a>
</li>
<li>
<a href="/en/pages/sync_rendering.html">- Syncronous Rendering</a>
</li>
<li>
<a href="/en/pages/routing_scheme.html">- Routing Scheme</a>
</li>
</ul>
</li>
<li>
<a href="/en/forms/handling_forms.html"><i class="fa fa-check-square" aria-hidden="true"></i> Forms</a>
<ul>
<li>
<a href="/en/forms/handling_forms.html">- Handling Forms</a>
</li>
<li>
<a href="/en/forms/handling_forms.html#validating-forms">- Validating Forms</a>
</li>
</ul>
</li>
<li>
<a href="/en/api_client.html"><i class="fa fa-refresh" aria-hidden="true"></i> Making Requests</a>
<ul>
<li>
<a href="/en/api_client.html">- API Client</a>
</li>
<li>
<a href="/en/server_sent_state.html">- Server-sent State</a>
</li>
</ul>
</li>
<li>
<a href="/en/services.html"><i class="fa fa-server" aria-hidden="true"></i> Backend</a>
<ul>
<li>
<a href="/en/services.html">- Feathers.JS Services</a>
</li>
<li>
<a href="/en/services.html#socketio">- Socket.IO/Realtime API</a>
</li>
<li>
<a href="/en/pages/creating_pages.html">- Working with MongoDB</a>
</li>
<li>
<a href="/en/pages/creating_pages.html">- Configuration</a>
</li>
<li>
<a href="/en/pages/creating_pages.html">- Deployment</a>
</li>
</ul>
</li>
<li>
<a href="/en/pages/creating_pages.html"><i class="fa fa-id-card" aria-hidden="true"></i> Authentication</a>
</li>
<li>
<a href="/en/pages/creating_pages.html"><i class="fa fa-handshake-o" aria-hidden="true"></i> License</a>
</li>
</ul>
</nav>
<footer class="col-md-4 col-lg-2">
Powered by <a href="https://skydocs.skyost.eu">SkyDocs</a> v0.7.4 Beta.
</footer>
</div>
</div>
<div id="article" class="col-lg-7 col-md-8 col-12 ml-auto mr-auto">
<article>
<section id="article-header" class="clearfix">
<ul class="links">
<li><small><a href="https://github.com/Skyost/SkyDocs/fork" class="text-muted">Fork it on Github</a></small></li>
<li><small><a href="https://github.com/Skyost/SkyDocs" class="text-muted">Star it on Github</a></small></li>
</ul>
<small class="date text-muted">Jul 23, 2019 1:28:58 PM</small>
</section>
<section>
<h1 id="creating-pages">Creating Pages</h1>
<p>Pages in Frontless are pure Riot.JS components. The pages have the same structure and logics as Riot.JS components - hooks, plugins, bindings, etc.
The only difference is that a page context is availbale in the <a href="#layouts">layouts</a> scope.</p>
<p><strong>Page Example:</strong></p>
<pre><code class="language-html">&lt;my-page&gt;
  &lt;app-header&gt;&lt;/app-header&gt;
  &lt;h1&gt;Hello World&lt;/h1&gt;
  &lt;script&gt;
    import AppHeader from 'header.riot'
    export default () =&gt; ({
      components: {
        [AppHeader.name]: AppHeader
      },
      title: 'Example page',
      foo: 'bar',
      onMounted() {},
      onHydrated() {}
    })
  &lt;/script&gt;
&lt;/my-page&gt;
</code></pre>
<h2 id="layouts">Layouts</h2>
<p>Layouts provide HTML page structure for Riot.JS components. Frontless makes use of <a href="https://ejs.co/">EJS</a> in order to render output html on the server side.
A page can specify a dedicated layout trough corresponding options.</p>
<p><strong>A layout example:</strong></p>
<pre><code class="language-html">&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/assets/css/styles.min.css&quot;&gt; 
    &lt;script src=&quot;/assets/application.js&quot;&gt;&lt;/script&gt;
    &lt;%- head %&gt;
    &lt;title&gt;&lt;%- page.title %&gt;&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;style data-ssr-jss&gt;&lt;%- stylesheet %&gt;&lt;/style&gt;
    &lt;%- output %&gt;
    &lt;script&gt;document.__GLOBAL_SHARED_STATE = &lt;%- Global %&gt;;&lt;/script&gt;  
    &lt;script type=&quot;data/json&quot; id=&quot;globals&quot;&gt;&lt;%- req.session.globals %&gt;&lt;/script&gt;
    &lt;script type=&quot;data/json&quot; id=&quot;state&quot;&gt;&lt;%- state %&gt;&lt;/script&gt;
    &lt;script type=&quot;data/json&quot; id=&quot;attributes&quot;&gt;&lt;%- shared %&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Page context is available in the layouts trough the <code>page</code> variable.</p>
<hr/>
<h3 id="page-lifecycle">PAGE LIFECYCLE <br><br></h3>
<pre>
                        INITIALIZE RIOT.JS ON SERVER

           1.               2.                 3.                  4.
     +-------------+   +-----------+    +----------------+     +----------+
     | GET '/page' +-->+ onMount() +--->+ beforeRequest()+---->+ fetch()  |
     +-------------+   +-----------+    +----------------+ |   +----------+
                                                           |   +----------+
                                                           +-->+ fetch()..|
                                                           |   +----------+
                                     5.                    +----... |
                             +----------------+                     |
                             | afterRequest() |     <---------------+
                             +----------------+
                                     |
                                     v
                                     6.
                             +----------------+
                             |  RETURN MARKUP |
                             +----------------+
                                     |
                                     |
                                     |
                                     v
                      INITIALIZE RIOT.JS APP IN BROWSER

              +-----------+   +------------+   +-------------+
              |onMounted()+-->+ onBrowser()+-->+ onHydrated()|
              +-----------+   +------------+   +-------------+
                                      |
                                      |
                                      v
                            +-------------------+
                            > APPLICATION READY |
                            +-------------------+
</pre>
<hr/>
<br>
<br>
<p><strong>All hooks and options:</strong></p>
<pre><code class="language-javascript">export default () =&gt; ({

  layout: 'base', // default to 'base'
  title: 'Page Title',
  access: {}, // access oprions
  
  beforeRequest() { /** Before `fetch` */ },
  async fetch() { /** Operations on server, emits automatically in every mounted component */ },
  afterRequest() { /** After `fetch` */  },
  onRendered() { /** After everything is rendered on server */  },

  onMounted() { /** Emits on server and bowser */ },
  onBrowser() { /** Emits on browser after mounted*/ },
  onHydrated() { /** Emits on browser only in page scope */ },
  
})
</code></pre>
</section>
<section id="pagination" class="clearfix">
<a href="/en/pages/components.html" class="text-muted previous"><i class="fa fa-caret-left" aria-hidden="true"></i> <span>Previous</span></a>
<a href="pages/layouts.html" class="text-muted next"><span>Next</span> <i class="fa fa-caret-right" aria-hidden="true"></i></a>
</section>
</article>
</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js"></script>
<script src="../../assets/js/page.js"></script>
</body>
</html>